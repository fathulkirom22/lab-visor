{% macro resourceUsage(id) %}
    <div class="w-100">
        <canvas id="{{ id }}" class="w-100"></canvas>
    </div>

    <script>
        fetch('/sys/data-tracker?size=25')
            .then(response => response.json())
            .then(resource => {
                const { DateTime } = luxon;

                let data = {
                    labels: resource.data.map(item => DateTime.fromISO(item.created_at).toFormat('h:mm a')),
                    datasets: [
                        {
                            label: "CPU Usage",
                            data: resource.data.map(item => item.cpu),
                            borderWidth: 1
                        },
                        {
                            label: "Memory Usage",
                            data: resource.data.map(item => item.memory),
                            borderWidth: 1
                        }
                    ]
                }
                const ctx = document.getElementById('{{ id }}');
                ctx.height = 300;

                new Chart(ctx, {
                    type: 'line',
                    data,
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true,
                                suggestedMax: 100
                            }
                        }
                    }
                });
            });

    </script>
{% endmacro %}